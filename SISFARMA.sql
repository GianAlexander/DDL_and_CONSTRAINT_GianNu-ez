
-- Table CLIENTE
CREATE TABLE CLIENTE 
(
    IDCLI NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1),
    NOMCLI varchar2(20),
    APEPCLI varchar2(40),
    APEMCLI varchar2(40),
    DNICLI char(8),
    TELCLI char(9),
    GMLCLI varchar2(30),
    ESTCLI char(1) DEFAULT 'A' ,
    CONSTRAINT CLIENTE_pk PRIMARY KEY (IDCLI)
) ;


ALTER TABLE CLIENTE 
ADD FECNACCLI DATE;


DROP TABLE CLIENTE;


CREATE INDEX idx_correo 
ON CLIENTE (GMLCLI);


CREATE VIEW VistaVentaDetalle AS
SELECT v.IDVEN, v.FACVEN, v.FECVEN, v.IDEMP, v.IDCLI,
       vd.IDVENDET, vd.CANMED, vd.IDMED
FROM VENTA v
JOIN VENTA_DETALLE vd ON v.IDVEN = vd.IDVEN;


CREATE OR REPLACE TRIGGER ActualizarFechaVenta
BEFORE INSERT ON VENTA
FOR EACH ROW
BEGIN
    :NEW.FECVEN := SYSDATE;
END;



CREATE OR REPLACE PROCEDURE InsertarCliente(
    p_Nombre IN VARCHAR2,
    p_ApellidoP IN VARCHAR2,
    p_ApellidoM IN VARCHAR2,
    p_DNI IN CHAR,
    p_Telefono IN CHAR,
    p_Correo IN VARCHAR2
)
AS
BEGIN
    INSERT INTO CLIENTE (NOMCLI, APEPCLI, APEMCLI, DNICLI, TELCLI, GMLCLI)
    VALUES (p_Nombre, p_ApellidoP, p_ApellidoM, p_DNI, p_Telefono, p_Correo);
    COMMIT;
END;






CREATE OR REPLACE FUNCTION ObtenerNombreCompletoCliente(
    p_IDCLI IN NUMBER
) RETURN VARCHAR2
AS
    v_Nombre VARCHAR2(50);
    v_ApellidoP VARCHAR2(50);
    v_ApellidoM VARCHAR2(50);
    v_NombreCompleto VARCHAR2(150);
BEGIN
    SELECT NOMCLI, APEPCLI, APEMCLI
    INTO v_Nombre, v_ApellidoP, v_ApellidoM
    FROM CLIENTE
    WHERE IDCLI = p_IDCLI;
    
    v_NombreCompleto := v_Nombre || ' ' || v_ApellidoP || ' ' || v_ApellidoM;
    
    RETURN v_NombreCompleto;
END;

ALTER TABLE CLIENTE
ADD CONSTRAINT CLIENTE_pk PRIMARY KEY (IDCLI);


ALTER TABLE CLIENTE
ADD CONSTRAINT CLIENTE_GMLCLI_uq UNIQUE (GMLCLI);


ALTER TABLE VENTA
ADD CONSTRAINT VENTA_IDCLI_fk FOREIGN KEY (IDCLI)
REFERENCES CLIENTE (IDCLI);


ALTER TABLE CLIENTE
ADD CONSTRAINT CLIENTE_TELCLI_ck CHECK (LENGTH(TELCLI) = 9);






-- INSERT INTO CLIENTE
INSERT INTO CLIENTE (NOMCLI, APEPCLI,APEMCLI, DNICLI, TELCLI,GMLCLI)VALUES('Joel', 'Mamani','Quispe','77436585','963214587','Joel@gmail.com');
INSERT INTO CLIENTE (NOMCLI, APEPCLI,APEMCLI, DNICLI, TELCLI,GMLCLI)VALUES('Jose', 'Torres','Sanches','22455689','987456123','Jose@gmail.com');
INSERT INTO CLIENTE (NOMCLI, APEPCLI,APEMCLI, DNICLI, TELCLI,GMLCLI)VALUES('Paul' , 'Quispe','Meneses','78965321','951236478','Paul@gmail.com');
INSERT INTO CLIENTE (NOMCLI, APEPCLI,APEMCLI, DNICLI, TELCLI,GMLCLI)VALUES('jose' ,'Asuncion','Comas','74852396','985632147','Jose@gmail.com');
INSERT INTO CLIENTE (NOMCLI, APEPCLI,APEMCLI, DNICLI, TELCLI,GMLCLI)VALUES('Cecilia' ,'Caceres','Lornejo','75214596','963214785','Cecilia@gmail.com');
INSERT INTO CLIENTE (NOMCLI, APEPCLI,APEMCLI, DNICLI, TELCLI,GMLCLI)VALUES('Esteban' ,'Rigoberto','Alta','76325894','987563214','Esteban@gmail.com');
INSERT INTO CLIENTE (NOMCLI, APEPCLI,APEMCLI, DNICLI, TELCLI,GMLCLI)VALUES('Macarena' ,'Bautista','Paucar','75315982','987451263','Macarena@gmail.com');
INSERT INTO CLIENTE (NOMCLI, APEPCLI,APEMCLI, DNICLI, TELCLI,GMLCLI)VALUES('Jeremias' ,'Pantano','Aguila','25413698','978456123','Jeremias@gmail.com');
INSERT INTO CLIENTE (NOMCLI, APEPCLI,APEMCLI, DNICLI, TELCLI,GMLCLI)VALUES('Aria' ,'Hurtado','Huerta','23456987','951427863','Aria@gmail.com');
INSERT INTO CLIENTE (NOMCLI, APEPCLI,APEMCLI, DNICLI, TELCLI,GMLCLI)VALUES('Luz','Olivares','Carrera','15591061','951159863','olivares@gmail.com');
INSERT INTO CLIENTE (NOMCLI, APEPCLI,APEMCLI, DNICLI, TELCLI,GMLCLI)VALUES('Alejandra','Mallqui','Barreto','15600378','952589863','mallqui@gmail.com');
INSERT INTO CLIENTE (NOMCLI, APEPCLI,APEMCLI, DNICLI, TELCLI,GMLCLI)VALUES('Blanca','Coca','Naturalich','15600983','952753863','coca@gmail.com');
INSERT INTO CLIENTE (NOMCLI, APEPCLI,APEMCLI, DNICLI, TELCLI,GMLCLI)VALUES('Sonia','Obispo','Gavino','15601549','952745863','obispo@gmail.com');
INSERT INTO CLIENTE (NOMCLI, APEPCLI,APEMCLI, DNICLI, TELCLI,GMLCLI)VALUES('Katy','Ly','Albujar','15672355','952742583','ly@gmail.com');
INSERT INTO CLIENTE (NOMCLI, APEPCLI,APEMCLI, DNICLI, TELCLI,GMLCLI)VALUES('Cele','Aleman','Cruz','15723366','952325863','aleman@gmail.com');
INSERT INTO CLIENTE (NOMCLI, APEPCLI,APEMCLI, DNICLI, TELCLI,GMLCLI)VALUES('Carlos','Gabino','Dias','15726079','952736563','gabino@gmail.com');
INSERT INTO CLIENTE (NOMCLI, APEPCLI,APEMCLI, DNICLI, TELCLI,GMLCLI)VALUES('Eva','Trujillo','Alejo','15757378','952745965','trujillo@gmail.com');
INSERT INTO CLIENTE (NOMCLI, APEPCLI,APEMCLI, DNICLI, TELCLI,GMLCLI)VALUES('Silas','Leon','Espinoza','15942236','954125863','leon@gmail.com');
INSERT INTO CLIENTE (NOMCLI, APEPCLI,APEMCLI, DNICLI, TELCLI,GMLCLI)VALUES('Deysi','Salazar','Garcia','16416033','958545863','salazar@gmail.com');
INSERT INTO CLIENTE (NOMCLI, APEPCLI,APEMCLI, DNICLI, TELCLI,GMLCLI)VALUES('Pedro' ,'Castle','Gutierres','73156489','932145687','Pedro@gmail.com');
COMMIT;

select * from CLIENTE;

-- Table: COMPRA
CREATE TABLE COMPRA (
    IDCOM NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1),
    IDPRO int  NOT NULL,
    FECCOM date  NOT NULL,
    TIPPAGCOM varchar2(30)  NOT NULL,
    PRETOTCOM number(8,2)  NOT NULL,
    ESTCOM char(1) DEFAULT 'A',
    CONSTRAINT COMPRA_pk PRIMARY KEY (IDCOM)
) ;

-- Table: COMPRA_DETALLE
CREATE TABLE COMPRA_DETALLE (
    IDCOMDET NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1),
    IDMED int  NOT NULL,
    IDCOM int  NOT NULL,
    CANCOMDET integer  NOT NULL,
    SUBTOTCOMDET number(8,2)  NOT NULL,
    CONSTRAINT COMPRA_DETALLE_pk PRIMARY KEY (IDCOMDET)
) ;

-- Table: EMPLEADO
CREATE TABLE EMPLEADO (
    IDEMP NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1),
    NOMEMP varchar2(40)  NOT NULL,
    APEPEMP varchar2(70)  NOT NULL,
    APEMEMP varchar2(70)  NOT NULL,
    DNIEMP char(8)  NOT NULL,
    USUEMP varchar2(20)  NOT NULL,
    PASEMP varchar2(16)  NOT NULL,
    TELEMP char(9)  NOT NULL,
    ESTEMP char(1) DEFAULT 'A',
    CONSTRAINT EMPLEADO_pk PRIMARY KEY (IDEMP)
) ;

-- INSERT INTO EMPLEADO
INSERT INTO EMPLEADO (NOMEMP, APEPEMP, APEMEMP, DNIEMP, USUEMP, PASEMP, TELEMP)VALUES('Alma','Asto', 'Atoche','74521365','AlmaAsto','74521365','974687432');
INSERT INTO EMPLEADO (NOMEMP, APEPEMP, APEMEMP, DNIEMP, USUEMP, PASEMP, TELEMP)VALUES('Jett','Robles', 'Zambrano','71456585','JettRobles','71456585','975738742');
INSERT INTO EMPLEADO (NOMEMP, APEPEMP, APEMEMP, DNIEMP, USUEMP, PASEMP, TELEMP)VALUES('Ben','Yucra', 'Casas','76459325','Benyucra','76459325','954783867');
INSERT INTO EMPLEADO (NOMEMP, APEPEMP, APEMEMP, DNIEMP, USUEMP, PASEMP, TELEMP)VALUES('Juan','Oliva','Gustamante','74521222','oliva','74521222','954784447');
INSERT INTO EMPLEADO (NOMEMP, APEPEMP, APEMEMP, DNIEMP, USUEMP, PASEMP, TELEMP)VALUES('Pablo','Vasques', 'Rios','74521332','vasques','74521332','954782247');
INSERT INTO EMPLEADO (NOMEMP, APEPEMP, APEMEMP, DNIEMP, USUEMP, PASEMP, TELEMP)VALUES('Luis',' Feijoo','Lama','75521332','feijoo','75528832','953332247');
INSERT INTO EMPLEADO (NOMEMP, APEPEMP, APEMEMP, DNIEMP, USUEMP, PASEMP, TELEMP)VALUES('Jaime','silva','Marchan','75444332','silva','75444332','953332247');
INSERT INTO EMPLEADO (NOMEMP, APEPEMP, APEMEMP, DNIEMP, USUEMP, PASEMP, TELEMP)VALUES('Ricardo','calmet','Rodriguez','00370639','calmet','00370639','953123247');
INSERT INTO EMPLEADO (NOMEMP, APEPEMP, APEMEMP, DNIEMP, USUEMP, PASEMP, TELEMP)VALUES('Manuel','laque','Contreras','00421804','laque','00421804','952343247');
INSERT INTO EMPLEADO (NOMEMP, APEPEMP, APEMEMP, DNIEMP, USUEMP, PASEMP, TELEMP)VALUES('Santos','leon','Franco','00426463','leon','00426463','952312347');
INSERT INTO EMPLEADO (NOMEMP, APEPEMP, APEMEMP, DNIEMP, USUEMP, PASEMP, TELEMP)VALUES('Martin','Chumbe','Ruiz','00821661','chumbe','00821661','952147347');
INSERT INTO EMPLEADO (NOMEMP, APEPEMP, APEMEMP, DNIEMP, USUEMP, PASEMP, TELEMP)VALUES('Loyta','Lopez','Peña','01004062','lopez','01004062','912347347');
INSERT INTO EMPLEADO (NOMEMP, APEPEMP, APEMEMP, DNIEMP, USUEMP, PASEMP, TELEMP)VALUES('Julio','Linarez','Melendez','01221713','linarez','01221713','912236347');
INSERT INTO EMPLEADO (NOMEMP, APEPEMP, APEMEMP, DNIEMP, USUEMP, PASEMP, TELEMP)VALUES('Juan','Bernedo','Soto','01230718','bernedo','01230718','914566347');
INSERT INTO EMPLEADO (NOMEMP, APEPEMP, APEMEMP, DNIEMP, USUEMP, PASEMP, TELEMP)VALUES('Ruben','Puma','Lopez','01285100','puma','01285100','917896347');
INSERT INTO EMPLEADO (NOMEMP, APEPEMP, APEMEMP, DNIEMP, USUEMP, PASEMP, TELEMP)VALUES('Adrian','Sanizo','mamani','01307186','sanizo','01307186','917369347');
INSERT INTO EMPLEADO (NOMEMP, APEPEMP, APEMEMP, DNIEMP, USUEMP, PASEMP, TELEMP)VALUES('Jose','Choque','palli','01309966','choque','01309966','917369852');
INSERT INTO EMPLEADO (NOMEMP, APEPEMP, APEMEMP, DNIEMP, USUEMP, PASEMP, TELEMP)VALUES('Rus','Foraquita','zapana','01315112','foraquita','01315112','917741852');
INSERT INTO EMPLEADO (NOMEMP, APEPEMP, APEMEMP, DNIEMP, USUEMP, PASEMP, TELEMP)VALUES('Elena','Calderon','muños','01323690','calderon','01323690','914561852');
INSERT INTO EMPLEADO (NOMEMP, APEPEMP, APEMEMP, DNIEMP, USUEMP, PASEMP, TELEMP)VALUES('Consuelo','Jimenes','Ladrillo','23126545','ConsueloJimenes','23126545','973654236');
COMMIT;

select * from EMPLEADO;

-- Table: MEDICAMENTO
CREATE TABLE MEDICAMENTO (
    IDMED NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1),
    TIPOMED char(1)  NOT NULL,
    NOMMED varchar2(30)  NOT NULL,
    STOMED int  NOT NULL,
    LABMED varchar2(30)  NOT NULL,
    NUMLOTMED varchar2(7)  NOT NULL,
    PREMED DECIMAL(8,2)  NOT NULL,
    FECVENCMED date  NOT NULL,
    CONSTRAINT MEDICAMENTO_pk PRIMARY KEY (IDMED)
) ;

-- INSERT INTO MEDICAMENTO
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('G','Amoxicilina',300,'74521365','2001651','5','15/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('C','Clamoxyl',300,'74521365','2001651','5','15/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('G','Diclofenaco',250,'71456585','2145785','5','20/11/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('C','Dolotren',250,'71456585','2145785','5','20/11/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('G','Fluoxetina',200,'76459325','7644512','2','19/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('C','Luramon',200,'76459325','7644512','2','19/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('G','Diazepam',350,'23126545','5643456','3','05/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('C','Valium',350,'23126545','5643456','3','05/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('G','Ibuprofeno',170,'76459326','3705357','2','12/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('C','Espidifen',170,'76459325','3705356','2','12/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('G','Ácido acetilsalicílico',120,'7645932','661523','2','15/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('C','Aspirina',120,'7645932','661523','2','15/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('G','Paracetamol',220,'76459325','2979245','10','09/11/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('C','Algidol',220,'76459325','2979245','10','09/11/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('G','Metamizol',180,'76459325','3450709','3','01/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('C','Nolotil',180,'76459325','3450709','3','01/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('G','Lorazepam',210,'76459326','1062269','2','18/11/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('C','Orfidal',210,'76459327','1062268','2','18/11/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('G','Clonazepam',150,'76459325','4578120','5','15/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('C','Rivotril',150,'76459325','4578120','5','15/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('G','Tramadol',220,'76459325','0093065','4','20/11/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('C','Adolonta',220,'76459377','0093066','4','20/11/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('G','Oxicodona',110,'76459325','2609696','5','22/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('C','OxyContin',110,'76459325','2609696','5','22/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('G','Indometacina',230,'76459325','6859230','3','09/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('C','Antalgil',230,'76459325','6859231','3','09/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('G','Naproxeno',190,'76459326','0172025','2','08/11/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('C','Artron',190,'76459325','0172026','2','08/11/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('G','Piroxicam',200,'76459324','2300038','3','22/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('C','Dixonal',200,'76459310','2300037','3','22/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('G','Meloxicam',180,'76459325','1245637','2','21/11/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('C','Mobic',180,'76459325','1245637','2','21/11/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('G','Sulindaco',210,'76459325','4456113','2','07/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('C','Aciclovir',210,'76459325','4456113','2','07/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('G','Entodolaco',190,'76459325','2825634','3','05/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('C','Lodine',190,'76459325','2825634','3','05/12/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('G','Tolmetina',200,'76459324','3681033','2','17/11/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('C','Tolectin',200,'76459325','3681032','2','17/11/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('G','Ketorolaco',210,'76459325','1693001','2','16/11/22');
INSERT INTO MEDICAMENTO (TIPOMED,NOMMED, STOMED, LABMED, NUMLOTMED, PREMED,FECVENCMED)VALUES('C','Trometamina',210,'76459325','1693001','2','16/11/22');
COMMIT;

select * from MEDICAMENTO;

-- Table: PROVEEDOR
CREATE TABLE PROVEEDOR (
    IDPRO NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1),
    RAZSOCPRO varchar2(100)  NOT NULL,
    RAZCOMPRO varchar2(100)  NOT NULL,
    RUCPROV char(11)  NOT NULL,
    EMAPRO varchar2(100)  NOT NULL,
    CELPRO char(9)  NOT NULL,
    DIRPROV varchar2(100)  NOT NULL,
    ESTPROV char(1) DEFAULT 'A',
    CONSTRAINT PROVEEDOR_pk PRIMARY KEY (IDPRO)
) ;

-- Table: VENTA
CREATE TABLE VENTA (
    IDVEN NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1),
    FACVEN varchar2(8)  NOT NULL,
    FECVEN date  NOT NULL,
    ESTVEN char(1) DEFAULT 'A',
    IDEMP int  NOT NULL,
    IDCLI int  NOT NULL,
    CONSTRAINT VENTA_pk PRIMARY KEY (IDVEN)
) ;

-- INSERT INTO VENTA
INSERT INTO VENTA (FACVEN,FECVEN,IDEMP,IDCLI)VALUES('F0010001','22/04/22','1','1');
INSERT INTO VENTA (FACVEN,FECVEN,IDEMP,IDCLI)VALUES('F0010002','22/05/22','2','2');
INSERT INTO VENTA (FACVEN,FECVEN,IDEMP,IDCLI)VALUES('F0010003','22/03/22','1','3');
COMMIT;

select * from VENTA;

-- Table: VENTA_DETALLE
CREATE TABLE VENTA_DETALLE (
    IDVENDET NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1),
    CANMED int  NOT NULL,
    ESTVEND char(1) DEFAULT 'A',
    IDMED int  NOT NULL,
    IDVEN int  NOT NULL,
    CONSTRAINT VENTA_DETALLE_pk PRIMARY KEY (IDVENDET)
);
-- INSERT INTO VENTA_DETALLE
INSERT INTO VENTA_DETALLE(CANMED,IDMED,IDVEN)VALUES('3','1','1');
INSERT INTO VENTA_DETALLE(CANMED,IDMED,IDVEN)VALUES('2','2','2');
INSERT INTO VENTA_DETALLE(CANMED,IDMED,IDVEN)VALUES('4','1','3');
COMMIT;

select * from VENTA_DETALLE;


-- foreign keys
-- Reference: COMPRA_DETALLE_COMPRA (table: COMPRA_DETALLE)
ALTER TABLE COMPRA_DETALLE ADD CONSTRAINT COMPRA_DETALLE_COMPRA
    FOREIGN KEY (IDCOM)
    REFERENCES COMPRA (IDCOM);

-- Reference: COMPRA_DETALLE_MEDICAMENTO (table: COMPRA_DETALLE)
ALTER TABLE COMPRA_DETALLE ADD CONSTRAINT COMPRA_DETALLE_MEDICAMENTO
    FOREIGN KEY (IDMED)
    REFERENCES MEDICAMENTO (IDMED);

-- Reference: COMPRA_PROVEEDOR (table: COMPRA)
ALTER TABLE COMPRA ADD CONSTRAINT COMPRA_PROVEEDOR
    FOREIGN KEY (IDPRO)
    REFERENCES PROVEEDOR (IDPRO);

-- Reference: VENTA_CLIENTE (table: VENTA)
ALTER TABLE VENTA ADD CONSTRAINT VENTA_CLIENTE
    FOREIGN KEY (IDCLI)
    REFERENCES CLIENTE (IDCLI);

-- Reference: VENTA_DETALLE_MEDICAMENTO (table: VENTA_DETALLE)
ALTER TABLE VENTA_DETALLE ADD CONSTRAINT VENTA_DETALLE_MEDICAMENTO
    FOREIGN KEY (IDMED)
    REFERENCES MEDICAMENTO (IDMED);

-- Reference: VENTA_DETALLE_VENTA (table: VENTA_DETALLE)
ALTER TABLE VENTA_DETALLE ADD CONSTRAINT VENTA_DETALLE_VENTA
    FOREIGN KEY (IDVEN)
    REFERENCES VENTA (IDVEN);

-- Reference: VENTA_EMPLEADO (table: VENTA)
ALTER TABLE VENTA ADD CONSTRAINT VENTA_EMPLEADO
    FOREIGN KEY (IDEMP)
    REFERENCES EMPLEADO (IDEMP);


INSERT INTO PROVEEDOR(RAZSOCPRO,RAZCOMPRO,RUCPROV,EMAPRO,CELPRO,DIRPROV,ESTPROV)
VALUES ('PharmaSolutions','PharmaSolutions S.A. de C.V.' ,'20528125698','PharmaSolutions.c@gmail.com','943731722','AV. Libertadores','A');
INSERT INTO PROVEEDOR(RAZSOCPRO,RAZCOMPRO,RUCPROV,EMAPRO,CELPRO,DIRPROV,ESTPROV) 
VALUES ('Salud y Vida','Laboratorios Salud y Vida S.A.','20602574955','LapSalud.@gmail.com','930547850','AV.Miraflores ','A');
INSERT INTO PROVEEDOR(RAZSOCPRO,RAZCOMPRO,RUCPROV,EMAPRO,CELPRO,DIRPROV,ESTPROV) 
VALUES ('BioTech Pharma','BioTech Pharma' ,'20608339460','Pharma,BioTech@gmail.com','924524929','Jr.2 de Mayo','A');
INSERT INTO PROVEEDOR(RAZSOCPRO,RAZCOMPRO,RUCPROV,EMAPRO,CELPRO,DIRPROV,ESTPROV) 
VALUES ('Biocare','Laboratorios Biocare S.A.'  ,'20486193809','Biocare.2020@gmail.com','963365369','Urb.San Isidro','A');
INSERT INTO PROVEEDOR(RAZSOCPRO,RAZCOMPRO,RUCPROV,EMAPRO,CELPRO,DIRPROV,ESTPROV) 
VALUES ('Genética',' Farmacéutica Genética S.A.','20425564910','Genética    .g@gmail.com','919591170','Jr.Bolognesi','A');
INSERT INTO PROVEEDOR(RAZSOCPRO,RAZCOMPRO,RUCPROV,EMAPRO,CELPRO,DIRPROV,ESTPROV) 
VALUES ('Innovations','Pharma Innovations S.A. de C.V.' ,'20551164072','Innovations.p@gmail.com','936707150','AV.28 de Julio','A');
INSERT INTO PROVEEDOR(RAZSOCPRO,RAZCOMPRO,RUCPROV,EMAPRO,CELPRO,DIRPROV,ESTPROV) 
VALUES ('MedPharm','MedPharm Solutions S.A.','20566068584','copito.03@gmail.com','900944156','AV.Santa Rosa ','A');
INSERT INTO PROVEEDOR(RAZSOCPRO,RAZCOMPRO,RUCPROV,EMAPRO,CELPRO,DIRPROV,ESTPROV) 
VALUES ('Farmacéuticos Unidos','Farmacéuticos Unidos S.A. de C.V.','20107666304','hornos@gmail.com','945198871','AV. 28 de Julio','A');
INSERT INTO PROVEEDOR(RAZSOCPRO,RAZCOMPRO,RUCPROV,EMAPRO,CELPRO,DIRPROV,ESTPROV) 
VALUES ('PharmaCorp','PharmaCorp S.A.' ,'2052188681','marleny.c@gmail.com','961953813','Jr.Jose Galvez ','A');
INSERT INTO PROVEEDOR(RAZSOCPRO,RAZCOMPRO,RUCPROV,EMAPRO,CELPRO,DIRPROV,ESTPROV) 
VALUES ('Novamed','Laboratorios Novamed S.A. de C.V.','20603002971','elastica.19@gmail.com','978475223','AV.Alfonzo Ugarte','A');


SELECT 
RAZSOCPRO AS RAZON_SOCIAL,
RAZCOMPRO AS RAZON_COMERCIAL,
RUCPROV AS RUC,
EMAPRO AS EMAIL,
CELPRO AS CELULAR,
DIRPROV AS DIRECCION,
CASE ESTPROV
   WHEN 'A' THEN 'ACTIVO'
   WHEN 'I' THEN 'INACTIVO'
END AS ESTADO 
FROM PROVEEDOR



